<p-dialog class="dialog" [header]="dialogTitle" [(visible)]="visible" [modal]="true"
          [style]="{height: '80vh',width: '50vw'}"
          (onHide)="closeDialog($event)">
  <form #f="ngForm" name="vacancy" novalidate>
    <div class="flex">
      <div class="p-inputgroup">
            <span class="p-inputgroup-addon">
                <i class="pi pi-user"></i>
            </span>
        <p-dropdown [options]="positions"
                    [(ngModel)]="item.position"
                    (ngModelChange)="selectPosition()"
                    name="position"
                    [style]="{width: '100%'}" [optionLabel]="'name'"></p-dropdown>
      </div>

      <div class="p-inputgroup">
    <span class="p-inputgroup-addon">
        <i class="pi pi-user"></i>
    </span>
        <input [(ngModel)]="item.salary" required
               name="salary"
               type="number"
               placeholder="Зарплата" pInputText />
      </div>

      <div class="p-inputgroup">
    <span class="p-inputgroup-addon">
        <i class="pi pi-user"></i>
    </span>
        <input [(ngModel)]="item.experience" required
               name="experience"
               type="string"
               placeholder="Опыт работы" pInputText />
      </div>

      <div class="p-inputgroup">
    <span class="p-inputgroup-addon">
        <i class="pi pi-user"></i>
    </span>
        <input [(ngModel)]="item.additional" required
               name="additional"
               type="string"
               placeholder="Дополнительно" pInputText />
      </div>


      <div class="personal-skills">
        <div class="personal-skills__toolbar">
          <button pButton type="button" class="p-button-success" label="Добавить новый навык"
                  icon="pi pi-cog"></button>
          <span class="personal-skills__text">Общий вес: {{summ}}</span>
          <span class="fail" *ngIf="summ > 100" style="color:red"> Общий вес не должен превышать 100</span>
        </div>
        <div class="flex flex-wrap gap-3 info-block">
          <div class="skills" *ngFor="let skill of item.competenceWeight">

            <div class="skills__title">
              <p-button
                icon="pi pi-trash"
                styleClass="p-button-outlined p-button-danger"
                (onClick)="deleteSkill(skill.competence.id)">
              </p-button>
              {{skill?.competence?.name}}
            </div>
            <div class="skills__weight">
              <p-inputNumber [(ngModel)]="skill.weight" [min]=0 [max]=100 (ngModelChange)="weightSum()"
                             name="weight" [required]=true
                             [showButtons]="true"></p-inputNumber>
            </div>
          </div>


        </div>
      </div>
    </div>
  </form>

  <p-footer>
    <div class="flex justify-content-center">
      <p-button icon="pi pi-check"
                (onClick)="onSubmit($event)"
                [disabled]="!f.valid"
                [label]="getSaveLabel()"
                styleClass="p-button-info">
      </p-button>
    </div>
  </p-footer>
</p-dialog>