# Инструкция по развёртыванию системы

Приложение *MESkittles* состоит из клиентского веб—приложения и серверной части.
Веб-приложение разработано c помощью *Angular 15*.
Серверная часть представляет собой сервис, разработанный с помощью *Java 17* и фреймворка *Spring Boot 3*.


Для запуска на платформе Windows можно скачать собранный дистрибутив по [ссылке](https://drive.google.com/file/d/1jJxTPns49Bwdtb41q0IBj7AFYUM70iGN/view?usp=sharing "MESkittles-dist.zip").

---

## Инструкция по запуску Java-сервиса
Java-сервис и его окружение лежат в папке `backend`. В папке содержатся:

* MESkittles.jar - java приложение
* run-back.bat - файл для запуска java приложения
* application.yml - основной конфигурационный файл
* application-pg.yml - конфигурация СУБД PostgreSQL
* application-h2.yml - конфигурация СУБД h2
* jre-17.0.6 - JRE (*Вы можете запустить jar файл с помощью установленной на вашей машине java*)

Чтобы запустить java-сервис, достаточно запустить файл `run-back.bat`. Перед запуском рекомендуется отредактировать конфигурационные файлы.

 Java-сервис может быть подключен c помощью JDBC к различным СУБД. Мы гарантируем работу с *PostgreSQL* и *H2*.
 
 За выбор режима работы с соответствующей СУБД в конфигурационном файле `application.yml` есть следующая настройка: 
```
spring:
  profiles:
    active: "pg" #для режима работы с H2 данная настройка должна принимать "h2"
```
Вы можете отредактировать конкретные настройки подключения к СУБД в файле *application-pg.yml* или в *application-h2.yml* в зависимости от выбранного режима profiles.active в *application.yml*.

По умолчанию сервис запускается на порту 8081.

---

## Инструкция по запуску Телеграм-бота
Для корректной работы бота необходимо указать в `application.yml` актуальные: ссылку на бота вида _t.me/AtomSkittlesBot_ и токен. В случае, если бот не нужен, в конфигурации следует прописать такие настройки:

```
telegram:
  link: "null"
  token: "null"
```

Для того, чтобы создать новую пару название-токен, необходимо перейти по ссылке: `https://t.me/BotFather`. Введите `/start`, чтобы посмотреть список доступных команд. Введите `/newbot` для создания нового бота. А затем придумайте ему название. BotFather выдаст вам актуальные токен и ссылку на бота.

Вставьте полученную ссылку или токен в `application.yml`.

---

## Инструкция по запуску клиента
 Запуск веб-приложения Angular осуществляется с помощью nginx. Для запуска *nginx* достаточно запустить файл *nginx.exe*, который располагается в папке `frontend/nginx-1.22.1`. По умолчанию nginx запускается на 80 порту.

 Файлы клиентского приложения распологаются в папке `frontend/nginx-1.22.1/html`. Внутри папки `frontend/nginx-1.22.1/html` располагаются ресурсы приложения и конфигурационный файл `config.json`. Внутри данного конфигурационного файла вы можете изменить адрес доступа к java-сервису:
 ```
  {
    "backendUrl": "http://localhost:8081"
  }
 ```

 
 
 Для доступа к приложению необходимо открыть браузер и перейти на адрес *localhost*. В качестве браузера рекомендуется использование *Google Chrome* актуальной версии. Если все действия были проведены успешно, то в браузере откроется страница авторизации.